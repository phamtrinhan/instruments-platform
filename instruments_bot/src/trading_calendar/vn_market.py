from _datetime import datetime

VN_HOLIDAYS = {
    # https://www.bvsc.com.vn/News/201162/170488/network.aspx
    "2012-01-02",
    "2012-01-02",
    "2012-01-23",
    "2012-01-24",
    "2012-01-25",
    "2012-01-26",
    "2012-01-27",
    "2012-04-02",
    "2012-04-30",
    "2012-05-01",
    "2012-09-03",
    # https://www.tinnhanhchungkhoan.vn/nam-2013-chung-khoan-viet-nam-co-9-ngay-nghi-le-post28710.html
    "2013-01-01",
    "2013-02-11",
    "2013-02-12",
    "2013-02-13",
    "2013-02-14",
    "2013-04-19",
    "2013-04-30",
    "2013-05-01",
    "2013-09-02",
    # https://thanhnien.vn/chung-khoan-nghi-giao-dich-14-ngay-trong-nam-2014-post7352.html
    "2014-01-01",
    "2014-01-28",
    "2014-01-29",
    "2014-01-30",
    "2014-01-31",
    "2014-02-01",
    "2014-02-02",
    "2014-02-03",
    "2014-02-04",
    "2014-02-05",
    "2014-04-09",
    "2014-04-30",
    "2014-05-01",
    "2014-05-02",
    "2014-09-01",
    "2014-09-02",
    # https://ndh.vn/chung-khoan/ttck-se-co-12-ngay-nghi-giao-dich-vao-dip-le-tet-trong-nam-2015-1109244.html
    "2015-01-01",
    "2015-01-02",
    "2015-02-16",
    "2015-02-17",
    "2015-02-18",
    "2015-02-19",
    "2015-02-20",
    "2015-02-21",
    "2015-02-22",
    "2015-02-23",
    "2015-04-28",
    "2015-04-29",
    "2015-04-30",
    "2015-05-01",
    # https://www.hnx.vn/vi-vn/chi-tiet-lich-nghi-gd-194376.html?_page=1
    "2016-01-01",
    "2016-02-08",
    "2016-02-09",
    "2016-02-10",
    "2016-02-11",
    "2016-02-12",
    "2016-04-18",
    "2016-05-02",
    "2016-05-03",
    "2016-09-02",
    # https://bnews.vn/hose-len-lich-nghi-giao-dich-nam-2017/16487.html
    "2017-01-02",
    "2017-01-27",
    "2017-01-28",
    "2017-01-29",
    "2017-01-30",
    "2017-01-31",
    "2017-02-01",
    "2017-02-02",
    "2017-04-06",
    "2017-05-01",
    "2017-05-02",
    "2017-09-04",
    # https://hnx.vn/vi-vn/chi-tiet-lich-nghi-gd-60000674.html?_page=1
    "2018-01-01",
    "2018-02-14",
    "2018-02-15",
    "2018-02-16",
    "2018-02-17",
    "2018-02-18",
    "2018-02-19",
    "2018-02-20",
    "2018-04-25",
    "2018-04-30",
    "2018-05-01",
    "2018-09-03",
    # https://www.vsd.vn/vi/lich-giao-dich?tab=LICH_NGHI_GIAODICH&date=02/04/2022&page=1&ks=2019
    "2019-01-01",
    "2019-02-04",
    "2019-02-05",
    "2019-02-06",
    "2019-02-07",
    "2019-02-08",
    "2019-04-15",
    "2019-04-29",
    "2019-04-30",
    "2019-05-01",
    "2019-09-02",
    # https://www.vsd.vn/vi/lich-giao-dich?tab=LICH_NGHI_GIAODICH&date=02/04/2022&page=1&ks=2020
    "2020-01-01",
    "2020-01-23",
    "2020-01-24",
    "2020-01-25",
    "2020-01-26",
    "2020-01-27",
    "2020-01-28",
    "2020-01-29",
    "2020-04-02",
    "2020-04-30",
    "2020-05-01",
    "2020-09-02",
    # https://www.vsd.vn/vi/lich-giao-dich?tab=LICH_NGHI_GIAODICH&date=02/04/2022&page=1&ks=2021
    "2021-01-01",
    "2021-02-10",
    "2021-02-11",
    "2021-02-12",
    "2021-02-13",
    "2021-02-14",
    "2021-02-15",
    "2021-02-16",
    "2021-04-21",
    "2021-04-30",
    "2021-05-03",
    "2021-09-02",
    "2021-09-03",
    # https://www.vsd.vn/vi/lich-giao-dich?tab=LICH_NGHI_GIAODICH&date=02/04/2022&page=1&ks=2022
    "2022-01-03",
    "2022-01-31",
    "2022-02-01",
    "2022-02-02",
    "2022-02-03",
    "2022-02-04",
    "2022-04-11",
    "2022-05-02",
    "2022-05-03",
    "2022-09-01",
    "2022-09-02",
}


def is_trading_day(date: datetime):
    # saturday or sunday with iso weekday standard
    if date.isoweekday() == 6 or date.isoweekday() == 7:
        return False
    str_date = date.strftime("%Y-%m-%d")
    if str_date in VN_HOLIDAYS:
        return False
    return True
